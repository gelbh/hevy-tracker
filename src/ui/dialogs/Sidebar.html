<!DOCTYPE html>
<html>
  <head>
    <base target="_top" />
    <meta charset="UTF-8" />
    <title>Hevy Tracker</title>
    <style>
      body {
        padding: 12px;
        font-family: Arial, sans-serif;
      }
      .menu-section {
        margin-bottom: 20px;
      }
      .menu-title {
        color: #5f6368;
        font-size: 13px;
        font-weight: 500;
        margin-bottom: 8px;
        padding-left: 8px;
      }
      .menu-item {
        width: 100%;
        text-align: left;
        padding: 8px;
        margin: 2px 0;
        background: none;
        border: none;
        border-radius: 4px;
        font-size: 14px;
        color: #3c4043;
        cursor: pointer;
      }
      .menu-item:hover {
        background-color: #f1f3f4;
      }
      .separator {
        border-top: 1px solid #e8eaed;
        margin: 8px 0;
      }
      /* Prevent content from being hidden on reload */
      #sidebar-content {
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
      }
    </style>
  </head>
  <body>
    <div id="sidebar-content">
      <div class="menu-section">
        <button
          class="menu-item"
          onclick="google.script.run.withFailureHandler(onError).showInitialSetup()"
        >
          ğŸ”‘ Set Hevy API Key
        </button>
      </div>

      <div class="separator"></div>

      <div class="menu-section">
        <div class="menu-title">IMPORT DATA</div>
        <button
          class="menu-item"
          onclick="google.script.run.withFailureHandler(onError).apiClient.runInitialImport()"
        >
          ğŸ“¥ Import All
        </button>
        <button
          class="menu-item"
          onclick="google.script.run.withFailureHandler(onError).importAllWorkouts()"
        >
          ğŸ‹ï¸ Import Workouts
        </button>
        <button
          class="menu-item"
          onclick="google.script.run.withFailureHandler(onError).importAllExercises()"
        >
          ğŸ’ª Import Exercises
        </button>
        <button
          class="menu-item"
          onclick="google.script.run.withFailureHandler(onError).importAllRoutines()"
        >
          ğŸ“‹ Import Routines
        </button>
        <button
          class="menu-item"
          onclick="google.script.run.withFailureHandler(onError).importAllRoutineFolders()"
        >
          ğŸ“ Import Routine Folders
        </button>
      </div>

      <div class="separator"></div>

      <div class="menu-section">
        <div class="menu-title">ROUTINE BUILDER</div>
        <button
          class="menu-item"
          onclick="google.script.run.withFailureHandler(onError).createRoutineFromSheet()"
        >
          ğŸ“‹ Create Routine from Sheet
        </button>
        <button
          class="menu-item"
          onclick="google.script.run.withFailureHandler(onError).clearRoutineBuilder()"
        >
          ğŸ—‘ï¸ Clear Builder Form
        </button>
      </div>

      <div class="separator"></div>

      <div class="menu-section">
        <button
          class="menu-item"
          onclick="google.script.run.withFailureHandler(onError).logWeight()"
        >
          âš–ï¸ Log Weight
        </button>
      </div>

      <div class="separator"></div>

      <div class="menu-section">
        <button
          class="menu-item"
          onclick="google.script.run.withFailureHandler(onError).showCreateSpreadsheetDialog()"
        >
          ğŸ“‹ Create New Spreadsheet
        </button>
        <button
          class="menu-item"
          onclick="google.script.run.withFailureHandler(onError).showGuideDialog()"
        >
          â“ View Setup Guide
        </button>
      </div>
    </div>

    <script>
      // Error handler for all button clicks
      function onError(error) {
        console.error("Operation failed:", error);
        // Optionally show error to user
      }

      // Make sure the content is visible when loaded
      window.onload = function () {
        document.getElementById("sidebar-content").style.display = "block";
      };
    </script>
  </body>
</html>
